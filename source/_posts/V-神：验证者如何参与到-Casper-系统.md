---
title: V 神：验证者如何参与到 Casper 系统
tags:
  - 以太坊(Ethereum)
originContent: ''
categories:
  - 博客
toc: false
abbrlink: aaebf6b4
date: 2020-11-05 20:43:11
---

Vitalik Buterin 在 2018 以太坊技术及应用大会上分享了节点是如何参与到 Casper 验证中来。下面是 V 神发言的简要梳理。

参与的步骤

质押代币
Casper 是验证系统。所有的节点要成为验证者，首先要有权益的证明，所以，需要质押一定额度的代币。
![0fb60ad1a513c76c0ae8f7ee97b5a6a0.jpg](/images/2020/11/05/df224184-8e94-4131-8dd6-69dc8b5c6bf4.jpg)
质押代币类似于存款，使用公钥做信息签名，同时，也需要一个取款地址，后续奖励时用得到。

签名公钥和取款地址无需完全一致。这意味着让其他人帮你进行签名验证。但即使其他人帮你签名，但无法把代币取出。所有的代币只能进入之前提供的取款地址。这样验证节点可以用热钱包来签名。公钥在线，代币留在冷钱包。作为验证者，资金更安全。

等待加入
质押代币之后，用户需要花一天左右的时间来等待加入。目前协议还没有完全确定。需要等待协议把申请节点加入验证者池。

参与验证
一旦进入验证者池，就是验证者身份了。验证者做什么？

首先是参与和确定主链区块。超过一定的节点验证后，主链区块确定，完成工作。其次是验证分片上的区块。按照 Casper 系统设计，不是所有节点都来做所有区块验证。区块被分配到 100 或更多的分片中，交易分开，不同的验证者验证不同的区块和交易。

总之，Casper 系统是区块确定工具，是共识机制一部分，主要用于确定区块，给区块带来更多安全性。

分片提案

以太坊的分片提案包含了 100 个子链。主链和子链各自承担不同工作。主链负责随机数的生成、随机选择哪个验证者进入哪个分片、谁可以创建分区等。

主链也会保持对验证节点的追踪，也就是说，假如你是一个验证节点，它会追踪你的所有验证相关信息，比如分配到什么分片中、得到什么奖励或惩罚。这些信息都由主链完成。此外，它也可以追踪子链上的区块。

子链主要负责交易处理，同时存储账户状态、合约状态。每隔一个小时，每个验证节点由系统随机分配一个分片。验证节点要做验证，要帮助确认区块是在哪个分片之上。

在任意时间点，验证节点被分配到特定分片上，比如有 100 个分片，有些人随机选择 1% 的验证节点，来确认任意一个分片上的区块。

分片系统可扩展，一个计算机可以处理 N 个交易，主链可以追踪 N 个分片。每个分片都能处理 N 个交易。也叫 2 次性分片，系统可以处理 2 倍 N 的交易。如果计算能力再翻一番，主链可以追踪 2 倍的分片，系统处理交易的能力是之前的 4 倍。

这里有一个 Cross-links，实现沟通的方式，也是主链用来追踪分片的方式。主链不追踪每个分片中的每个区块，只追踪 Cross-links。

验证节点的职责
![0168e355810c54bbd55cab8f6e4d64a8.jpg](/images/2020/11/05/aa38c0bc-2b2c-4d68-b9f6-bd14a57e4a40.jpg)
V 神指出，作为验证节点的工作，是做主链验证，验证每个区块。主链包括副联、交易和对验证节点的奖惩。验证节点必须在分片上作区块的生成，生成主链区块，还需确认分片上的区块已经交联。

验证节点奖惩

如果节点正常运行，其他三分之二的节点也正常，大家都可以拿到奖励。如果不是，则拿不到。

如果进行签名，但发生错误或冲突，虽然在线，但签名信息不正确。节点被认为有攻击网络意图，或者节点被黑。一旦出现此种情况，都会按比例得到惩罚。比例按照其他在线签名的验证节点比例来确定，罚款跟其他犯错节点的罚款数量成正比。

如果被黑，或者出现电脑或数据有问题，也得接受惩罚，不过程度较轻。一旦确定是攻击行为，罚款会很大。攻击成本也很高。

也就是这个机制主要是激励大家更好的保护网络安全，也是保护自己。如果大家有同样的权益池，如果权益池被黑，非常集中，大家的惩罚都会很高。这样也就是鼓励大家不要用同样的权益池、不用同样的 VPS。

通过这样的机制鼓励大家更去中心化，不用同样的系统，不用同样的客户端等，通过更好地保护自己的同时，增加了整个网络的安全性。

收益提取

通过私钥或提款地址可以触发提款。触发后，验证节点在 7 天左右关闭。然后等待 4 个月，之后可以提取以太坊代币。